# 🎬 معالج الفيديو - Video Processor

تطبيق ويب متقدم لمعالجة الفيديو مطور بـ Flask يقوم بدمج الفيديوهات (للدروس من جزئين) وإضافة علامة مائية ثابتة وأوترو ثابت مع دعم تسريع GPU.

## 🚀 المميزات

- **معالجة فيديو احترافية**: دعم لجميع صيغ الفيديو الشائعة
- **علامة مائية ثابتة**: علامة مائية محددة مسبقاً بشفافية 30%
- **أوترو ثابت**: فيديو أوترو محدد مسبقاً يُضاف تلقائياً
- **واجهة مستخدم عربية**: تصميم عصري ومتجاوب مع جميع الأجهزة
- **معالجة سريعة**: استخدام أحدث تقنيات معالجة الفيديو
- **أمان عالي**: حماية الملفات وحذف تلقائي بعد المعالجة

## 🛠️ التقنيات المستخدمة

### Backend

- **Python 3.8+**
- **Flask**: إطار عمل الويب
- **OpenCV**: معالجة الفيديو والصور
- **MoviePy**: تحرير وتجميع الفيديو
- **Pillow**: معالجة الصور

### Frontend

- **HTML5**: هيكل الصفحة
- **CSS3**: التصميم والأنيميشن
- **JavaScript ES6+**: التفاعل والوظائف
- **Font Awesome**: الأيقونات
- **Google Fonts**: خطوط عربية جميلة

## 📋 المتطلبات

- Python 3.8 أو أحدث
- pip (مدير حزم Python)
- متصفح ويب حديث

## 🚀 التثبيت والتشغيل

### 1. استنساخ المشروع

```bash
git clone <repository-url>
cd video-processor
```

### 2. إنشاء بيئة افتراضية (اختياري)

```bash
python -m venv venv
# على Windows
venv\Scripts\activate
# على Linux/Mac
source venv/bin/activate
```

### 3. تثبيت المتطلبات

```bash
pip install -r requirements.txt
```

### 4. تشغيل التطبيق

```bash
python app.py
```

### 5. فتح المتصفح

افتح المتصفح واذهب إلى: `http://localhost:5000`

## 📁 هيكل المشروع المبسط

```
video-processor/
├── app.py                          # التطبيق الرئيسي Flask
├── requirements.txt                # متطلبات Python
├── Dockerfile                      # إعدادات Docker
├── docker-compose.yml              # إعدادات Docker Compose
├── production.env                  # متغيرات البيئة للإنتاج
├── README.md                       # دليل المشروع
├── COOLIFY_DEPLOYMENT_GUIDE.md     # دليل النشر على Coolify
├── assets/                         # الملفات الثابتة
│   ├── watermark.png              # العلامة المائية الثابتة
│   └── outro.mp4                   # فيديو الأوترو الثابت
├── templates/
│   └── index.html                  # الواجهة الرئيسية
└── static/
    ├── css/
    │   └── style.css               # ملف التصميم
    └── js/
        ├── config.js               # إعدادات Frontend
        └── script.js               # وظائف JavaScript
```

> **ملاحظة**: مجلدات `uploads/` و `outputs/` سيتم إنشاؤها تلقائياً عند تشغيل التطبيق.

## 🎯 كيفية الاستخدام

### 1. رفع الفيديو

- اختر الفيديو الذي تريد معالجته
- يدعم الصيغ: MP4, AVI, MOV, MKV, WMV, FLV
- الحد الأقصى: 500 ميجابايت

### 2. المعالجة التلقائية

- العلامة المائية ستُضاف تلقائياً (شفافية 30%)
- فيديو الأوترو سيُضاف في النهاية تلقائياً
- كلاهما محدد مسبقاً ولا يحتاج تدخل

### 3. معالجة الفيديو

- اضغط على زر "معالجة الفيديو"
- انتظر حتى تكتمل المعالجة (GPU أو CPU)
- قم بتحميل الفيديو النهائي

## 🔧 التخصيص

### تغيير موقع العلامة المائية

في ملف `app.py`، يمكنك تعديل موقع العلامة المائية:

```python
# وضع العلامة المائية في الزاوية العلوية اليمنى
watermark = watermark.set_position(('right', 'top'))

# تغيير إلى الزاوية العلوية اليسرى
watermark = watermark.set_position(('left', 'top'))

# تغيير إلى المركز
watermark = watermark.set_position('center')
```

### تغيير حجم العلامة المائية

```python
# العلامة المائية بحجم ربع ارتفاع الفيديو
watermark = watermark.resize(height=video.h // 4)

# تغيير إلى ثلث ارتفاع الفيديو
watermark = watermark.resize(height=video.h // 3)
```

## 🌐 النشر على الإنترنت

### 🚀 Coolify (الطريقة الموصى بها)

**دليل شامل متوفر في: [`COOLIFY_DEPLOYMENT_GUIDE.md`](./COOLIFY_DEPLOYMENT_GUIDE.md)**

خطوات سريعة:

```bash
# 1. رفع إلى Git
git add .
git commit -m "Ready for Coolify deployment"
git push origin main

# 2. في Coolify:
# - أنشئ تطبيق جديد
# - اربط Git repository
# - اضبط متغيرات البيئة
# - انشر التطبيق
```

### 🐳 Docker

```bash
# بناء الصورة
docker build -t video-processor .

# تشغيل الحاوية
docker run -p 5000:5000 -e SECRET_KEY=your-secret-key video-processor

# أو باستخدام Docker Compose
docker-compose up -d
```

### Heroku

```bash
# إنشاء ملف Procfile
echo "web: gunicorn app:app" > Procfile

# إنشاء ملف runtime.txt
echo "python-3.9.16" > runtime.txt

# نشر التطبيق
heroku create your-app-name
git push heroku main
```

### DigitalOcean App Platform

1. اربط مستودع GitHub
2. اختر Python كإطار عمل
3. اضبط متغيرات البيئة
4. انشر التطبيق

### AWS Elastic Beanstalk

1. أنشئ تطبيق جديد
2. ارفع ملف ZIP يحتوي على المشروع
3. اختر Python كبيئة
4. انشر التطبيق

## 🔒 الأمان

- **تحقق من نوع الملف**: يتم التحقق من صحة نوع الملف قبل المعالجة
- **حد حجم الملف**: الحد الأقصى 500 ميجابايت
- **حذف تلقائي**: يتم حذف الملفات المؤقتة بعد المعالجة
- **تشفير**: يمكن إضافة HTTPS للموقع

## 🐛 استكشاف الأخطاء

### مشاكل شائعة

1. **خطأ في تثبيت المكتبات**

   ```bash
   pip install --upgrade pip
   pip install -r requirements.txt
   ```

2. **خطأ في معالجة الفيديو**

   - تأكد من أن الفيديو صالح
   - تحقق من حجم الملف
   - تأكد من دعم صيغة الفيديو

3. **مشاكل في الذاكرة**
   - قلل حجم الفيديو
   - أغلق التطبيقات الأخرى
   - أعد تشغيل الخادم

## 📱 التوافق

- ✅ Chrome 80+
- ✅ Firefox 75+
- ✅ Safari 13+
- ✅ Edge 80+
- ✅ Mobile browsers

## 🤝 المساهمة

نرحب بمساهماتكم! يرجى:

1. عمل Fork للمشروع
2. إنشاء فرع جديد للميزة
3. عمل Commit للتغييرات
4. عمل Push للفرع
5. إنشاء Pull Request

## 📄 الترخيص

هذا المشروع مرخص تحت رخصة MIT. راجع ملف `LICENSE` للتفاصيل.

## 📞 الدعم

إذا واجهت أي مشاكل أو لديك أسئلة:

- أنشئ Issue جديد
- راسلنا عبر البريد الإلكتروني
- تواصل معنا عبر وسائل التواصل الاجتماعي

## 🔄 التحديثات

### الإصدار 1.0.0

- ✅ معالجة الفيديو الأساسية
- ✅ إضافة العلامة المائية
- ✅ إضافة الأوترو
- ✅ واجهة مستخدم عربية
- ✅ تصميم متجاوب

### الميزات المستقبلية

- 🚧 معالجة متعددة للفيديوهات
- 🚧 خيارات متقدمة للعلامة المائية
- 🚧 دعم المزيد من صيغ الفيديو
- 🚧 معالجة الصوت
- 🚧 API للمطورين

---

**ملاحظة**: تأكد من أن لديك الصلاحيات القانونية لمعالجة الفيديوهات والعلامات المائية التي تستخدمها.
