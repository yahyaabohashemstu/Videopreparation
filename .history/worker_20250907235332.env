# Celery Worker Environment Configuration

# Worker Mode
WORKER_MODE=celery

# Backend Configuration
# TODO: Move to Coolify Secrets for better security
# SECRET_KEY=your-secret-key-here  # Move this to Coolify Secrets
# SECRET_KEY=super-secure-video-processor-2024-ultra-strong-key-xyz789abc123def456ghi789jkl012mno345pqr678stu901vwx234yz
FLASK_ENV=production
DEBUG=false

# File Configuration
UPLOAD_FOLDER=/data/uploads
OUTPUT_FOLDER=/data/outputs
MAX_CONTENT_LENGTH=524288000

# Redis Configuration (update with actual Coolify Redis URL)
# Example: REDIS_URL=redis://default:MyStrongPass@redis-database-xxx:6379/0
# Update the password and service name from your Coolify Redis service
REDIS_URL=redis://default:ed6o6szgcP2VomP2rOO3NxOzAUDocmaUoq19gjC3ynG58o1MAW7mqy6GNlKXG6tC@redis-database-vk0kg0g0kkg0gkwcs4k4w4:6379/0

# لوج فوري
PYTHONUNBUFFERED=1

# Celery Optimization - محسن للاستقرار (4 أنوية: 2, 8 أنوية: 3-4)
CELERY_CONCURRENCY=2
CELERY_PREFETCH_MULTIPLIER=1

# Video Processing Optimization - ديناميكي حسب الأنوية (4 أنوية: 4-6, 8 أنوية: 8-12)
FFMPEG_THREADS=8
VIDEO_QUALITY=ultrafast
# TODO: Check if GPU_ACCELERATION is actually used in code
GPU_ACCELERATION=true

# إعدادات NVENC قابلة للتخصيص (محسنة للجودة العالية)
NVENC_CQ=19
NVENC_MAXRATE=16M
NVENC_BUFSIZE=32M
NVENC_BV=8M
NVENC_PRESET=p1

# إعدادات CPU fallback قابلة للتخصيص
X264_PRESET=veryfast
X264_CRF=20

# حدود Celery لعدم ضياع المهام (طابقها مع الكود)
CELERY_VISIBILITY_TIMEOUT=21600
TASK_SOFT_TIME_LIMIT=18000
TASK_TIME_LIMIT=21600
